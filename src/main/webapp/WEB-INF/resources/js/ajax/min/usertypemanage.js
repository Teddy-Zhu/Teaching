function userTreeonClick(event,treeId,treeNode,clickFlag){curUserTreeNode=treeNode,console.log(curUserTreeNode),$("#user_editname").val(curUserTreeNode.strname),$("#regcheck").iCheck(1==curUserTreeNode.intallowreg?"check":"uncheck")}function treeOnclick(){}function loadUserType(){$.ajax({url:"Type/GetUserTypeAllForType",type:"post",dataType:"json",success:function(response){nodes=$.fn.zTree.init($("#ul_tree_usertype"),usersetting,response),userTreeObj=$.fn.zTree.getZTreeObj("ul_tree_usertype"),userTreeObj.expandAll(!0),curUserTreeNode=null},async:!0})}var userTreeObj,usersetting={data:{key:{name:"strname",url:""},simpleData:{enable:!0,idKey:"intidentityid",rootPId:-1},view:{showLine:!0,showIcon:!0}},callback:{onClick:treeOnclick}},curUserTreeNode=null;$(function(){$("#regcheck").iCheck({checkboxClass:"icheckbox_square-blue"}),$("#insertcheck").iCheck({checkboxClass:"icheckbox_square-blue"}),$(".icheckbox_square-blue").css("margin-top","5px"),$("#ul_tree_usertype").length>0&&loadUserType(),$(".usertype").click(function(){loadUserType()}),$("#user_edit").click(function(){var allregcheck,name=$("#user_editname").val().trim();return null==curUserTreeNode?void $.TeachDialog({title:"Operation Message!",content:"Please select a type to edit!"}):""==name||void 0==name?void $.TeachDialog({title:"Operation Message!",content:"Please Input a name!"}):(allregcheck=$("#regcheck").parent().hasClass("checked")?1:0,void $.ajax({url:"TypeOperate/UpdateUserType",type:"post",dataType:"json",data:{id:curUserTreeNode.intidentityid,allowreg:allregcheck,name:name},success:function(response){response?(curUserTreeNode.strname=name,curUserTreeNode.intallowreg=allregcheck,userTreeObj.updateNode(curUserTreeNode),$.TeachDialog({title:"Operation Message!",content:"Update UserType successfully!"})):$.TeachDialog({title:"Operation Message!",content:"Update UserType failed!"})},async:!0}))}),$("#user_insert").click(function(){var name=$("#user_insertname").val().trim();return""==name||void 0==name?void $.TeachDialog({title:"Operation Message!",content:"Please Input a name!"}):void $.ajax({url:"TypeOperate/InsertUserType",type:"post",dataType:"json",data:{allowreg:$("#insertcheck").parent().hasClass("checked")?1:0,name:name},success:function(response){isNaN(response)?$.TeachDialog({title:"Operation Message!",content:"Insert UserType failed!"}):(userTreeObj.addNodes(null,{intidentityid:parseInt(response),strname:name}),$.TeachDialog({title:"Operation Message!",content:"Insert UserType successfully!"}))},async:!0})}),$("#user_delete").click(function(){return null==curUserTreeNode?void $.TeachDialog({title:"Operation Message!",content:"Please select a type to edit!"}):void $.ajax({url:"TypeOperate/DeleteUserType",type:"post",dataType:"json",data:{id:curUserTreeNode.intidentityid},success:function(response){response?(treeObj.removeNode(curUserTreeNode),$.TeachDialog({title:"Operation Message!",content:"Delete UserType successfully!"})):$.TeachDialog({title:"Operation Message!",content:"Delete UserType failed!"})},async:!0})}),$("[data-toggle='tooltip']").tooltip(),$("[data-toggle='tooltip']").click(function(){LoadAjaxContent("ajax/access_manage")})});