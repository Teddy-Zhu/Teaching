"use strict";function LoadJS(t){var e=$.Deferred();return $.getScript(t,function(){e.resolve()}),e.promise()}function LoadJsFile(t){var e,n,a;if(!$.isArray(t))return LoadJS(t);for(e=[],n=0,a=t.length;a>n;n++)e[n]=LoadJS(t[n]);return $.when.apply($,e)}function LoadLeafletScript(t){$.fn.L?t&&"function"==typeof t&&t():$.getScript("resources/plugins/leaflet/leaflet.js",t)}function unix2human(t){var e=new Date(t),n=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+p(e.getHours())+":"+p(e.getMinutes())+":"+p(e.getSeconds());return n}function p(t){return 10>t?"0"+t:t}function LoadBootstrapValidatorScript(t){$.fn.bootstrapValidator?t&&"function"==typeof t&&t():$.getScript("resources/plugins/bootstrapvalidator/bootstrapValidator.min.js",t)}function LoadDataTablesScripts(t){function e(){$.getScript("resources/plugins/datatables/jquery.dataTables.min.js",function(){$.getScript("resources/plugins/datatables/ZeroClipboard.min.js",function(){$.getScript("resources/plugins/datatables/dataTables.tableTools.min.js",function(){$.getScript("resources/plugins/datatables/dataTables.bootstrap.min.js",t)})})})}$.fn.dataTables?t&&"function"==typeof t&&t():e()}function LoadSpringyScripts(t){function e(){$.getScript("resources/plugins/springy/springy.js",n)}function n(){$.getScript("resources/plugins/springy/springyui.js",t)}$.fn.Springy?t&&"function"==typeof t&&t():e()}function logout(){$.TeachDialog({content:"你确定要退出吗?",showCloseButton:!0,bootstrapModalOption:{},otherButtons:["确定"],clickButton:function(t,e,n){0==n&&$.ajax({url:"User/AuthLogout",type:"post",async:!1,success:function(){window.top.location.href="/"}})}})}function sessionout(){$.TeachDialog({content:"你的会话过期了，请重新登录!",dialogHidden:function(){window.top.location.href="/?ref="+window.top.location.pathname+window.top.location.hash},bootstrapModalOption:{}})}function MessagesMenuWidth(){var t=window.innerWidth,e=$("#sidebar-left").outerWidth(),n=16.666666666666664*(t-e)/100;$("#messages-menu").width(n)}function LoadFancyboxScript(t){$.fn.fancybox?t&&"function"==typeof t&&t():$.getScript("resources/plugins/fancybox/jquery.fancybox.js",t)}function LoadAjaxContent(t){$(".preloader").show(),$.ajax({mimeType:"text/html; charset=utf-8",url:t,type:"GET",success:function(t){$(".preloader").hide(),$("#ajax-content").html(t),1==parseInt($("#animation").attr("data-open"))&&($("#ajax-content").addClass("animated fadeInRight"),$("#ajax-content").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated fadeInRight")}))},error:function(t,e,n){},complete:function(t,e){return 3389==t.status?void sessionout():void 0},dataType:"html",async:!1})}function LoadModel(t){var e=$.Deferred();return(void 0==t||""==t.trim())&&e.reject(),void 0!=$(".box-content.table-responsive").data("modelName")?e.resolve($(".box-content.table-responsive").data("modelName")):$.ajax({mimeType:"text/html; charset=utf-8",url:"Model/"+t,type:"POST",dataType:"html",async:!1}).success(function(t){$(".box-content.table-responsive").data("modelName",t),e.resolve(t)}).fail(function(){e.reject()}),e}function SetMinBlockHeight(t){t.css("min-height",window.innerHeight-49)}function DashboardTabChecker(){$("#content").on("click","a.tab-link",function(t){t.preventDefault();var e=$(this).attr("id");$("div#dashboard_tabs").find("div[id^=dashboard]").each(function(){$(this).attr("id")!="dashboard-"+e&&$(this).slideUp()}),$("#dashboard-"+e).slideDown(),$(this).closest(".nav").find("li").removeClass("active"),$(this).closest("li").addClass("active")})}function OpenModalBox(t,e,n){var a=$("#modalbox");a.find(".modal-header-name span").html(t),a.find(".devoops-modal-inner").html(e),a.find(".devoops-modal-bottom").html(n),a.fadeIn("fast"),$("body").addClass("body-expanded")}function CloseModalBox(){var t=$("#modalbox");t.fadeOut("fast",function(){t.find(".modal-header-name span").children().remove(),t.find(".devoops-modal-inner").children().remove(),t.find(".devoops-modal-bottom").children().remove(),$("body").removeClass("body-expanded")})}function CreateAllSliders(){var t,e,n,a,o,i;$(".slider-default").slider(),t=$(".slider-range-min-amount"),e=$(".slider-range-min"),n=$(".slider-range-max"),a=$(".slider-range-max-amount"),o=$(".slider-range"),i=$(".slider-range-amount"),e.slider({range:"min",value:37,min:1,max:700,slide:function(e,n){t.val("$"+n.value)}}),t.val("$"+e.slider("value")),n.slider({range:"max",min:1,max:100,value:2,slide:function(t,e){a.val(e.value)}}),a.val(n.slider("value")),o.slider({range:!0,min:0,max:500,values:[75,300],slide:function(t,e){i.val("$"+e.values[0]+" - $"+e.values[1])}}),i.val("$"+o.slider("values",0)+" - $"+o.slider("values",1)),$("#equalizer > div.progress > div").each(function(){var t=parseInt($(this).text(),10);$(this).empty().slider({value:t,range:"min",animate:!0,orientation:"vertical"})})}function ScreenSaver(){function t(){var t,e,n,a;this.location={x:Math.random()*s,y:Math.random()*l},this.radius=0,this.speed=3,this.angle=360*Math.random(),t=Math.round(255*Math.random()),e=Math.round(255*Math.random()),n=Math.round(255*Math.random()),a=Math.random(),this.rgba="rgba("+t+", "+e+", "+n+", "+a+")"}function e(){var t,e,a,o,r,d,c;for(i.globalCompositeOperation="source-over",i.fillStyle="rgba(0, 0, 0, 0.02)",i.fillRect(0,0,s,l),i.globalCompositeOperation="lighter",t=0;t<n.length;t++){for(e=n[t],i.fillStyle="white",i.fillRect(e.location.x,e.location.y,e.radius,e.radius),a=0;a<n.length;a++)o=n[a],r=o.location.y-e.location.y,d=o.location.x-e.location.x,c=Math.sqrt(d*d+r*r),200>c&&(i.beginPath(),i.lineWidth=1,i.moveTo(e.location.x,e.location.y),i.lineTo(o.location.x,o.location.y),i.strokeStyle=e.rgba,i.stroke());e.location.x=e.location.x+e.speed*Math.cos(e.angle*Math.PI/180),e.location.y=e.location.y+e.speed*Math.sin(e.angle*Math.PI/180),e.location.x<0&&(e.location.x=s),e.location.x>s&&(e.location.x=0),e.location.y<0&&(e.location.y=l),e.location.y>l&&(e.location.y=0)}}var n,a,o=document.getElementById("canvas"),i=o.getContext("2d"),s=window.innerWidth,l=window.innerHeight;for(o.width=s,o.height=l,n=[],a=0;25>a;a++)n.push(new t);setInterval(e,30)}function removeAnmaClass(){$("#ajax-content").hasClass("fadeInRight")&&$("#ajax-content").removeClass("am-animation-slide-right")}jQuery.DownloadFile=function(t){var e,n=t.url,a=t.data,o=t.method;n&&a&&(a="string"==typeof a?a:jQuery.param(a),e="",jQuery.each(a.split("&"),function(){var t=this.split("=");e+='<input type="hidden" name="'+t[0]+'" value="'+t[1]+'" />'}),jQuery('<form style="display:none;" action="'+n+'" method="'+(o||"post")+'">'+e+"</form>").appendTo("body").submit().remove())},String.prototype.trimEnd=function(t){if(!t)return this;for(var e=this;;){if(e.substr(e.length-t.length,t.length)!=t)break;e=e.substr(0,e.length-t.length)}return e},function(t){t.fn.beautyTables=function(){var e=this,n=!1;this.on("keydown",function(a){var o=a.target,i=t(o).closest("tr"),s=t(o).closest("td");if("INPUT"==o.tagName.toUpperCase()){if(a.shiftKey===!0)switch(a.keyCode){case 37:s.prev().children("input[type=text]").focus();break;case 39:s.next().children("input[type=text]").focus();break;case 40:n||i.next().find("td:eq("+s.index()+") input[type=text]").focus();break;case 38:n||i.prev().find("td:eq("+s.index()+") input[type=text]").focus()}if(a.ctrlKey===!0)switch(a.keyCode){case 37:i.find("td:eq(1)").find("input[type=text]").focus();break;case 39:i.find("td:last-child").find("input[type=text]").focus();break;case 40:n||e.find("tr:last-child td:eq("+s.index()+") input[type=text]").focus();break;case 38:n||e.find("tr:eq(1) td:eq("+s.index()+") input[type=text]").focus()}(13==a.keyCode||9==a.keyCode)&&(a.preventDefault(),s.next().find("input[type=text]").focus()),n||(34==a.keyCode&&(a.preventDefault(),e.find("tr:last-child td:last-child").find("input[type=text]").focus()),33==a.keyCode&&(a.preventDefault(),e.find("tr:eq(1) td:eq(1)").find("input[type=text]").focus()))}}),e.find("input[type=text]").each(function(){t(this).on("blur",function(n){var a=n.target,o=t(a).parents("td");e.find("input[name=string-fill]").prop("checked")&&o.nextAll().find("input[type=text]").each(function(){t(this).val(t(a).val())})})})}}(jQuery),function(t){t.fn.beautyHover=function(){var e=this;e.on("mouseover","td",function(){var e=t(this).index(),n=t(this).closest("table").find("tr");n.each(function(){t(this).find("td:eq("+e+")").addClass("beauty-hover")})}).on("mouseleave","td",function(e){var n=t(this).index(),a=t(this).closest("table").find("tr");a.each(function(){t(this).find("td:eq("+n+")").removeClass("beauty-hover")})})}}(jQuery),$(function(){var t,e,n,a;1==parseInt($("#animation").attr("data-open"))&&($("#ajax-content").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated fadeInRight")}),$("#headernavbar").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated fadeInDown")}),$("#sidebar-left").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated fadeInRight")})),$("body").on("click",".show-sidebar",function(t){t.preventDefault(),$("div#main").toggleClass("sidebar-show"),setTimeout(MessagesMenuWidth,250)}),t=location.hash.replace(/^#/,""),t.length<1&&(t="dashboard"),LoadAjaxContent("ajax/"+t),e=$('.main-menu li a[href$="'+t+'"]'),e.addClass("active-parent active"),$(".dropdown:has(li:has(a.active)) > a").addClass("active-parent active"),$(".dropdown:has(li:has(a.active)) > ul").css("display","block"),$(".main-menu").on("click","a",function(t){var e,n,a,o=$(this).parents("li"),i=$(this).closest("li.dropdown"),s=$(".main-menu li").not(o);s.find("a").removeClass("active"),s.find("a").removeClass("active-parent"),$(this).hasClass("dropdown-toggle")||0==$(this).closest("li").find("ul").length?($(this).addClass("active-parent"),e=$(this).next(),e.is(":visible")?(i.find("ul.dropdown-menu").slideUp("fast"),i.find("ul.dropdown-menu a").removeClass("active")):(s.find("ul.dropdown-menu").slideUp("fast"),e.slideDown("fast"))):i.find("a.dropdown-toggle").hasClass("active-parent")&&(n=$(this).closest("ul.dropdown-menu"),n.find("li.dropdown").not($(this).closest("li")).find("ul.dropdown-menu").slideUp("fast")),$(this).hasClass("active")||($(this).parents("ul.dropdown-menu").find("a").removeClass("active"),$(this).addClass("active")),$(this).hasClass("ajax-link")&&(t.preventDefault(),$(this).hasClass("add-full")?$("#content").addClass("full-content"):$("#content").removeClass("full-content"),a=$(this).attr("href"),window.location.hash=a,LoadAjaxContent("ajax/"+a)),"#"==$(this).attr("href")&&t.preventDefault()}),n=$(window).height()-50,$("#main").css("min-height",n).on("click",".expand-link",function(t){var e,n,a,o=$("body");t.preventDefault(),e=$(this).closest("div.box"),n=$(this).find("i"),n.toggleClass("fa-expand").toggleClass("fa-compress"),e.toggleClass("expanded"),o.toggleClass("body-expanded"),a=0,o.hasClass("body-expanded")&&(a=100),setTimeout(function(){e.toggleClass("expanded-padding")},a),setTimeout(function(){e.resize(),e.find("[id^=map-]").resize()},a+50)}).on("click",".collapse-link",function(t){var e,n,a;t.preventDefault(),e=$(this).closest("div.box"),n=$(this).find("i"),a=e.find("div.box-content"),a.slideToggle("fast"),n.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),setTimeout(function(){e.resize(),e.find("[id^=map-]").resize()},50)}).on("click",".close-link",function(t){t.preventDefault();var e=$(this).closest("div.box");e.remove()}),$("body").on("click","a.close-link",function(t){t.preventDefault(),CloseModalBox()}),$(".dropdown-menu .top-link").on("click",function(t){var e,n;t.preventDefault(),e=$(this).attr("href"),n=$('.main-menu li a[href$="'+e+'"]'),n.addClass("active-parent active"),$(".dropdown:has(li:has(a.active)) > a").addClass("active-parent active"),$(".dropdown:has(li:has(a.active)) > ul").css("display","block"),window.location.hash=e,n.trigger("click")}),$("#search").on("keydown",function(t){var e,n;13==t.keyCode&&(t.preventDefault(),e=$("#searchMenu").attr("data-value"),n=$('.main-menu li a[href$="'+e+'"]'),n.addClass("active-parent active"),$(".dropdown:has(li:has(a.active)) > a").addClass("active-parent active"),$(".dropdown:has(li:has(a.active)) > ul").css("display","block"),window.location.hash=e,n.trigger("click"))}),$("#search i").on("click",function(){var t=$.Event("keydown");t.keyCode=13,$(this).trigger(t)}),$(".main-menu .dropdown a[class!='ajax-link']").not("[class~='ajax-link']").not("[href~='javascript:logout();']").on("click",function(t){t.preventDefault()}),$("#content").css("height",$(window).height()-$("#headernavbar").height()+"px"),NProgress.configure({parent:"#headernavbar",ease:"ease",speed:800}),$(document).ajaxStart(function(){NProgress.start()}),$(document).ajaxStop(function(){NProgress.done()}),a=[],$("[class~='ajax-link'][href!='#']").each(function(t){var e={};e.data=$(this).attr("href"),e.value=$.trim($(this).html().replace(/<i(.*)<\/i>/,"")),a.push(e)}),$("#searchMenu").autocomplete({lookup:a}),$.ajaxSetup({complete:function(t,e){switch(t.status){case 3389:sessionout();break;case 500:$.TeachDialog({content:"服务端错误!",showCloseButton:!0});break;case 3388:$.TeachDialog({content:"你没有权限这么做!",showCloseButton:!0});break;case 3387:$.TeachDialog({content:"未知错误!",showCloseButton:!0});break;case 3386:$.TeachDialog({content:"参数错误!",showCloseButton:!0});break;case 3385:$.TeachDialog({content:"信息验证错误!",showCloseButton:!0});break;case 3384:$.TeachDialog({content:"类型被使用!",showCloseButton:!0});break;case 3383:$.TeachDialog({content:"保存Log错误!",showCloseButton:!0});break;case 3382:$.TeachDialog({content:"空数据错误!",showCloseButton:!0});break;case 405:$.TeachDialog({content:"非法访问!",showCloseButton:!0})}}})});