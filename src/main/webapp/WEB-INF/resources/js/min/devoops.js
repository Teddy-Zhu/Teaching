"use strict";jQuery.DownloadFile=function(d){var e=d.url;var a=d.data;var c=d.method;if(e&&a){a=typeof a=="string"?a:jQuery.param(a);var b="";jQuery.each(a.split("&"),function(){var f=this.split("=");b+='<input type="hidden" name="'+f[0]+'" value="'+f[1]+'" />'});jQuery('<form style="display:none;" action="'+e+'" method="'+(c||"post")+'">'+b+"</form>").appendTo("body").submit().remove()}};function LoadJS(b){var a=$.Deferred();$.getScript(b,function(){a.resolve()});return a.promise()}function LoadJsFile(d){if(!$.isArray(d)){return LoadJS(d)}var c=[];for(var a=0,b=d.length;a<b;a++){c[a]=LoadJS(d[a])}return $.when.apply($,c)}function LoadLeafletScript(a){if(!$.fn.L){$.getScript("resources/plugins/leaflet/leaflet.js",a)}else{if(a&&typeof(a)==="function"){a()}}}String.prototype.trimEnd=function(b){if(!b){return this}var a=this;while(true){if(a.substr(a.length-b.length,b.length)!=b){break}a=a.substr(0,a.length-b.length)}return a};function unix2human(b){var a=new Date(b);var c=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+p(a.getHours())+":"+p(a.getMinutes())+":"+p(a.getSeconds());return c}function p(a){return a<10?"0"+a:a}function LoadBootstrapValidatorScript(a){if(!$.fn.bootstrapValidator){$.getScript("resources/plugins/bootstrapvalidator/bootstrapValidator.min.js",a)}else{if(a&&typeof(a)==="function"){a()}}}function LoadDataTablesScripts(a){function b(){$.getScript("resources/plugins/datatables/jquery.dataTables.min.js",function(){$.getScript("resources/plugins/datatables/ZeroClipboard.min.js",function(){$.getScript("resources/plugins/datatables/dataTables.tableTools.min.js",function(){$.getScript("resources/plugins/datatables/dataTables.bootstrap.min.js",a)})})})}if(!$.fn.dataTables){b()}else{if(a&&typeof(a)==="function"){a()}}}function LoadSpringyScripts(a){function b(){$.getScript("resources/plugins/springy/springy.js",c)}function c(){$.getScript("resources/plugins/springy/springyui.js",a)}if(!$.fn.Springy){b()}else{if(a&&typeof(a)==="function"){a()}}}function logout(){$.TeachDialog({content:"你确定要退出吗?",showCloseButton:true,bootstrapModalOption:{},otherButtons:["确定"],clickButton:function(c,b,a){if(a==0){$.ajax({url:"User/AuthLogout",type:"post",async:false,success:function(){window.top.location.href="/"}})}}})}function sessionout(){$.TeachDialog({content:"你的会话过期了，请重新登录!",dialogHidden:function(){window.top.location.href="/?ref="+window.top.location.pathname+window.top.location.hash},bootstrapModalOption:{}})}function MessagesMenuWidth(){var a=window.innerWidth;var b=$("#sidebar-left").outerWidth();var c=(a-b)*16.66666666666666/100;$("#messages-menu").width(c)}function LoadFancyboxScript(a){if(!$.fn.fancybox){$.getScript("resources/plugins/fancybox/jquery.fancybox.js",a)}else{if(a&&typeof(a)==="function"){a()}}}function LoadAjaxContent(a){$(".preloader").show();$.ajax({mimeType:"text/html; charset=utf-8",url:a,type:"GET",success:function(b){$(".preloader").hide();$("#ajax-content").html(b);if(parseInt($("#animation").attr("data-open"))==1){$("#ajax-content").addClass("animated fadeInRight");$("#ajax-content").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated fadeInRight")})}},error:function(c,d,b){},complete:function(c,b){if(c.status==3389){sessionout();return}},dataType:"html",async:false})}function LoadModel(b){var a=$.Deferred();if(b==undefined||b.trim()==""){a.reject()}if($(".box-content.table-responsive").data(b)!=undefined){a.resolve($(".box-content.table-responsive").data(b))}else{$.ajax({mimeType:"text/html; charset=utf-8",url:"Model/"+b,type:"POST",dataType:"html",async:false}).success(function(c){$(".box-content.table-responsive").data(b,c);a.resolve(c)}).fail(function(){a.reject()})}return a}function SetMinBlockHeight(a){a.css("min-height",window.innerHeight-49)}function DashboardTabChecker(){$("#content").on("click","a.tab-link",function(b){b.preventDefault();var a=$(this).attr("id");$("div#dashboard_tabs").find("div[id^=dashboard]").each(function(){if($(this).attr("id")!="dashboard-"+a){$(this).slideUp()}});$("#"+"dashboard-"+a).slideDown();$(this).closest(".nav").find("li").removeClass("active");$(this).closest("li").addClass("active")})}function OpenModalBox(b,c,a){var d=$("#modalbox");d.find(".modal-header-name span").html(b);d.find(".devoops-modal-inner").html(c);d.find(".devoops-modal-bottom").html(a);d.fadeIn("fast");$("body").addClass("body-expanded")}function CloseModalBox(){var a=$("#modalbox");a.fadeOut("fast",function(){a.find(".modal-header-name span").children().remove();a.find(".devoops-modal-inner").children().remove();a.find(".devoops-modal-bottom").children().remove();$("body").removeClass("body-expanded")})}(function(a){a.fn.beautyTables=function(){var c=this;var b=false;this.on("keydown",function(e){var f=e.target;var g=a(f).closest("tr");var d=a(f).closest("td");if(f.tagName.toUpperCase()=="INPUT"){if(e.shiftKey===true){switch(e.keyCode){case 37:d.prev().children("input[type=text]").focus();break;case 39:d.next().children("input[type=text]").focus();break;case 40:if(!b){g.next().find("td:eq("+d.index()+") input[type=text]").focus()}break;case 38:if(!b){g.prev().find("td:eq("+d.index()+") input[type=text]").focus()}break}}if(e.ctrlKey===true){switch(e.keyCode){case 37:g.find("td:eq(1)").find("input[type=text]").focus();break;case 39:g.find("td:last-child").find("input[type=text]").focus();break;case 40:if(!b){c.find("tr:last-child td:eq("+d.index()+") input[type=text]").focus()}break;case 38:if(!b){c.find("tr:eq(1) td:eq("+d.index()+") input[type=text]").focus()}break}}if(e.keyCode==13||e.keyCode==9){e.preventDefault();d.next().find("input[type=text]").focus()}if(!b){if(e.keyCode==34){e.preventDefault();c.find("tr:last-child td:last-child").find("input[type=text]").focus()}if(e.keyCode==33){e.preventDefault();c.find("tr:eq(1) td:eq(1)").find("input[type=text]").focus()}}}});c.find("input[type=text]").each(function(){a(this).on("blur",function(e){var f=e.target;var d=a(f).parents("td");if(c.find("input[name=string-fill]").prop("checked")){d.nextAll().find("input[type=text]").each(function(){a(this).val(a(f).val())})}})})}})(jQuery);(function(a){a.fn.beautyHover=function(){var b=this;b.on("mouseover","td",function(){var c=a(this).index();var d=a(this).closest("table").find("tr");d.each(function(){a(this).find("td:eq("+c+")").addClass("beauty-hover")})}).on("mouseleave","td",function(c){var d=a(this).index();var f=a(this).closest("table").find("tr");f.each(function(){a(this).find("td:eq("+d+")").removeClass("beauty-hover")})})}})(jQuery);function CreateAllSliders(){$(".slider-default").slider();var f=$(".slider-range-min-amount");var e=$(".slider-range-min");var c=$(".slider-range-max");var d=$(".slider-range-max-amount");var a=$(".slider-range");var b=$(".slider-range-amount");e.slider({range:"min",value:37,min:1,max:700,slide:function(g,h){f.val("$"+h.value)}});f.val("$"+e.slider("value"));c.slider({range:"max",min:1,max:100,value:2,slide:function(g,h){d.val(h.value)}});d.val(c.slider("value"));a.slider({range:true,min:0,max:500,values:[75,300],slide:function(g,h){b.val("$"+h.values[0]+" - $"+h.values[1])}});b.val("$"+a.slider("values",0)+" - $"+a.slider("values",1));$("#equalizer > div.progress > div").each(function(){var g=parseInt($(this).text(),10);$(this).empty().slider({value:g,range:"min",animate:true,orientation:"vertical"})})}function ScreenSaver(){var a=document.getElementById("canvas");var b=a.getContext("2d");var h=window.innerWidth;var d=window.innerHeight;a.width=h;a.height=d;var g=[];for(var e=0;e<25;e++){g.push(new f())}function f(){this.location={x:Math.random()*h,y:Math.random()*d};this.radius=0;this.speed=3;this.angle=Math.random()*360;var l=Math.round(Math.random()*255);var k=Math.round(Math.random()*255);var j=Math.round(Math.random()*255);var i=Math.random();this.rgba="rgba("+l+", "+k+", "+j+", "+i+")"}function c(){b.globalCompositeOperation="source-over";b.fillStyle="rgba(0, 0, 0, 0.02)";b.fillRect(0,0,h,d);b.globalCompositeOperation="lighter";for(var k=0;k<g.length;k++){var m=g[k];b.fillStyle="white";b.fillRect(m.location.x,m.location.y,m.radius,m.radius);for(var l=0;l<g.length;l++){var o=g[l];var r=o.location.y-m.location.y;var q=o.location.x-m.location.x;var j=Math.sqrt(q*q+r*r);if(j<200){b.beginPath();b.lineWidth=1;b.moveTo(m.location.x,m.location.y);b.lineTo(o.location.x,o.location.y);b.strokeStyle=m.rgba;b.stroke()}}m.location.x=m.location.x+m.speed*Math.cos(m.angle*Math.PI/180);m.location.y=m.location.y+m.speed*Math.sin(m.angle*Math.PI/180);if(m.location.x<0){m.location.x=h}if(m.location.x>h){m.location.x=0}if(m.location.y<0){m.location.y=d}if(m.location.y>d){m.location.y=0}}}setInterval(c,30)}function removeAnmaClass(){if($("#ajax-content").hasClass("fadeInRight")){$("#ajax-content").removeClass("am-animation-slide-right")}}$(function(){if(parseInt($("#animation").attr("data-open"))==1){$("#ajax-content").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated fadeInRight")});$("#headernavbar").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated fadeInDown")});$("#sidebar-left").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated fadeInRight")})}$("body").on("click",".show-sidebar",function(f){f.preventDefault();$("div#main").toggleClass("sidebar-show");setTimeout(MessagesMenuWidth,250)});var a=location.hash.replace(/^#/,"");if(a.length<1){a="dashboard"}LoadAjaxContent("ajax/"+a);var c=$('.main-menu li a[href$="'+a+'"]');c.addClass("active-parent active");$(".dropdown:has(li:has(a.active)) > a").addClass("active-parent active");$(".dropdown:has(li:has(a.active)) > ul").css("display","block");$(".main-menu").on("click","a",function(h){var j=$(this).parents("li");var i=$(this).closest("li.dropdown");var f=$(".main-menu li").not(j);f.find("a").removeClass("active");f.find("a").removeClass("active-parent");if($(this).hasClass("dropdown-toggle")||$(this).closest("li").find("ul").length==0){$(this).addClass("active-parent");var g=$(this).next();if(g.is(":visible")){i.find("ul.dropdown-menu").slideUp("fast");i.find("ul.dropdown-menu a").removeClass("active")}else{f.find("ul.dropdown-menu").slideUp("fast");g.slideDown("fast")}}else{if(i.find("a.dropdown-toggle").hasClass("active-parent")){var k=$(this).closest("ul.dropdown-menu");k.find("li.dropdown").not($(this).closest("li")).find("ul.dropdown-menu").slideUp("fast")}}if(!$(this).hasClass("active")){$(this).parents("ul.dropdown-menu").find("a").removeClass("active");$(this).addClass("active")}if($(this).hasClass("ajax-link")){h.preventDefault();if($(this).hasClass("add-full")){$("#content").addClass("full-content")}else{$("#content").removeClass("full-content")}var l=$(this).attr("href");window.location.hash=l;LoadAjaxContent("ajax/"+l)}if($(this).attr("href")=="#"){h.preventDefault()}});var b=$(window).height()-50;$("#main").css("min-height",b).on("click",".expand-link",function(i){var f=$("body");i.preventDefault();var g=$(this).closest("div.box");var h=$(this).find("i");h.toggleClass("fa-expand").toggleClass("fa-compress");g.toggleClass("expanded");f.toggleClass("body-expanded");var j=0;if(f.hasClass("body-expanded")){j=100}setTimeout(function(){g.toggleClass("expanded-padding")},j);setTimeout(function(){g.resize();g.find("[id^=map-]").resize()},j+50)}).on("click",".collapse-link",function(i){i.preventDefault();var f=$(this).closest("div.box");var g=$(this).find("i");var h=f.find("div.box-content");h.slideToggle("fast");g.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down");setTimeout(function(){f.resize();f.find("[id^=map-]").resize()},50)}).on("click",".close-link",function(g){g.preventDefault();var f=$(this).closest("div.box");f.remove()});$("body").on("click","a.close-link",function(f){f.preventDefault();CloseModalBox()});$(".dropdown-menu .top-link").on("click",function(g){g.preventDefault();var f=$(this).attr("href");var h=$('.main-menu li a[href$="'+f+'"]');h.addClass("active-parent active");$(".dropdown:has(li:has(a.active)) > a").addClass("active-parent active");$(".dropdown:has(li:has(a.active)) > ul").css("display","block");window.location.hash=f;h.trigger("click")});$("#search").on("keydown",function(g){if(g.keyCode==13){g.preventDefault();var f=$("#searchMenu").attr("data-value");var h=$('.main-menu li a[href$="'+f+'"]');h.addClass("active-parent active");$(".dropdown:has(li:has(a.active)) > a").addClass("active-parent active");$(".dropdown:has(li:has(a.active)) > ul").css("display","block");window.location.hash=f;h.trigger("click")}});$("#search i").on("click",function(){var f=$.Event("keydown");f.keyCode=13;$(this).trigger(f)});$(".main-menu .dropdown a[class!='ajax-link']").not("[class~='ajax-link']").not("[href~='javascript:logout();']").on("click",function(f){f.preventDefault()});$("#content").css("height",$(window).height()-$("#headernavbar").height()+"px");NProgress.configure({parent:"#headernavbar",ease:"ease",speed:800});$(document).ajaxStart(function(){NProgress.start()});$(document).ajaxStop(function(){NProgress.done()});var d=[];$("[class~='ajax-link'][href!='#']").each(function(f){var g={};g.data=$(this).attr("href");g.value=$.trim($(this).html().replace(/<i(.*)<\/i>/,""));d.push(g)});$("#searchMenu").autocomplete({lookup:d});$.ajaxSetup({complete:function(f,e){switch(f.status){case 3389:sessionout();break;case 500:$.TeachDialog({content:"服务端错误!",showCloseButton:true,});break;case 3388:$.TeachDialog({content:"你没有权限这么做!",showCloseButton:true,});break;case 3387:$.TeachDialog({content:"未知错误!",showCloseButton:true,});break;case 3386:$.TeachDialog({content:"参数错误!",showCloseButton:true,});break;case 3385:$.TeachDialog({content:"信息验证错误!",showCloseButton:true,});break;case 3384:$.TeachDialog({content:"类型被使用!",showCloseButton:true,});break;case 3383:$.TeachDialog({content:"保存Log错误!",showCloseButton:true,});break;case 3382:$.TeachDialog({content:"空数据错误!",showCloseButton:true,});break;case 405:$.TeachDialog({content:"非法访问!",showCloseButton:true,});break}}})});